<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chinese Word Segmentation | Processing Chinese Data with R</title>
  <meta name="description" content="This website includes the materials for a workshop on Processing Chinese Text Data with R, at Hong Kong Shue Yan University (online)." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chinese Word Segmentation | Processing Chinese Data with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This website includes the materials for a workshop on Processing Chinese Text Data with R, at Hong Kong Shue Yan University (online)." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chinese Word Segmentation | Processing Chinese Data with R" />
  
  <meta name="twitter:description" content="This website includes the materials for a workshop on Processing Chinese Text Data with R, at Hong Kong Shue Yan University (online)." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="loading-text-data.html"/>
<link rel="next" href="applications.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<link href="libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="libs/wordcloud2-0.0.1/hover.js"></script>
<script src="libs/wordcloud2-binding-0.2.2/wordcloud2.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style-new.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-the-workshop"><i class="fa fa-check"></i>Structure of the Workshop</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#materials"><i class="fa fa-check"></i>Materials</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="environment-setup.html"><a href="environment-setup.html"><i class="fa fa-check"></i>Environment Setup</a>
<ul>
<li class="chapter" data-level="" data-path="environment-setup.html"><a href="environment-setup.html#r-and-rstudio"><i class="fa fa-check"></i>R and RStudio</a></li>
<li class="chapter" data-level="" data-path="environment-setup.html"><a href="environment-setup.html#libraries"><i class="fa fa-check"></i>Libraries</a></li>
<li class="chapter" data-level="" data-path="environment-setup.html"><a href="environment-setup.html#environment-checking"><i class="fa fa-check"></i>Environment Checking</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="loading-text-data.html"><a href="loading-text-data.html"><i class="fa fa-check"></i>Loading Text Data</a>
<ul>
<li class="chapter" data-level="" data-path="loading-text-data.html"><a href="loading-text-data.html#text-data-types"><i class="fa fa-check"></i>Text Data Types</a></li>
<li class="chapter" data-level="" data-path="loading-text-data.html"><a href="loading-text-data.html#data-description"><i class="fa fa-check"></i>Data Description</a></li>
<li class="chapter" data-level="" data-path="loading-text-data.html"><a href="loading-text-data.html#csv-format"><i class="fa fa-check"></i>CSV Format</a></li>
<li class="chapter" data-level="" data-path="loading-text-data.html"><a href="loading-text-data.html#directory-format"><i class="fa fa-check"></i>Directory Format</a></li>
<li class="chapter" data-level="" data-path="loading-text-data.html"><a href="loading-text-data.html#zipped-file-format"><i class="fa fa-check"></i>Zipped File Format</a></li>
<li class="chapter" data-level="" data-path="loading-text-data.html"><a href="loading-text-data.html#encoding-issues"><i class="fa fa-check"></i>Encoding Issues</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chinese-word-segmentation.html"><a href="chinese-word-segmentation.html"><i class="fa fa-check"></i>Chinese Word Segmentation</a>
<ul>
<li><a href="chinese-word-segmentation.html#chinese-word-segmenter-jiebar">Chinese Word Segmenter <code>jiebaR</code></a>
<ul>
<li class="chapter" data-level="" data-path="chinese-word-segmentation.html"><a href="chinese-word-segmentation.html#a-quick-example"><i class="fa fa-check"></i>A Quick Example</a></li>
<li><a href="chinese-word-segmentation.html#parameters-setting-of-jiebar">Parameters Setting of <code>jiebaR</code></a></li>
<li class="chapter" data-level="" data-path="chinese-word-segmentation.html"><a href="chinese-word-segmentation.html#user-defined-dictionary"><i class="fa fa-check"></i>User-defined dictionary</a></li>
<li class="chapter" data-level="" data-path="chinese-word-segmentation.html"><a href="chinese-word-segmentation.html#stopwords"><i class="fa fa-check"></i>Stopwords</a></li>
<li class="chapter" data-level="" data-path="chinese-word-segmentation.html"><a href="chinese-word-segmentation.html#pos-tagging"><i class="fa fa-check"></i>POS Tagging</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chinese-word-segmentation.html"><a href="chinese-word-segmentation.html#chinese-text-analytics-pipeline"><i class="fa fa-check"></i>Chinese Text Analytics Pipeline</a>
<ul>
<li><a href="chinese-word-segmentation.html#quanteda-framework"><code>Quanteda</code> Framework</a></li>
<li><a href="chinese-word-segmentation.html#tidytext-framework"><code>Tidytext</code> Framework</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i>Applications</a>
<ul>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#environment"><i class="fa fa-check"></i>Environment</a></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#loading-data"><i class="fa fa-check"></i>Loading Data</a></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#overview-of-the-data-set"><i class="fa fa-check"></i>Overview of the Data Set</a></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#data-preprocessing-cleaning"><i class="fa fa-check"></i>Data Preprocessing (Cleaning)</a></li>
<li><a href="applications.html#initialize-jiebar">Initialize <code>jiebaR</code></a></li>
<li><a href="applications.html#tidytext-framework-1"><code>Tidytext</code> Framework</a>
<ul>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#case-study-word-frequency-and-wordcloud"><i class="fa fa-check"></i>Case Study: Word Frequency and Wordcloud</a></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#case-study-patterns"><i class="fa fa-check"></i>Case Study: Patterns</a></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#case-study-lexical-bundles"><i class="fa fa-check"></i>Case Study: Lexical Bundles</a></li>
</ul></li>
<li><a href="applications.html#quanteda-framework-1"><code>Quanteda</code> Framework</a>
<ul>
<li><a href="applications.html#case-study-concordances-with-kwic">Case Study: Concordances with <code>kwic()</code></a></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#case-study-comparison-word-cloud"><i class="fa fa-check"></i>Case Study: Comparison Word Cloud</a></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#case-study-collocations"><i class="fa fa-check"></i>Case Study: Collocations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="applications.html"><a href="applications.html#recap"><i class="fa fa-check"></i>Recap</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://web.ntnu.edu.tw/~alvinchen" target ="blank"><img src="images/alerts/home.svg" height = "20" width = "20">Alvin Chen </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Processing Chinese Data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chinese-word-segmentation" class="section level1">
<h1>Chinese Word Segmentation</h1>
<div class="sourceCode" id="cb15"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb15-1"><a href="chinese-word-segmentation.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb15-2"><a href="chinese-word-segmentation.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb15-3"><a href="chinese-word-segmentation.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb15-4"><a href="chinese-word-segmentation.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb15-5"><a href="chinese-word-segmentation.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readtext)</span>
<span id="cb15-6"><a href="chinese-word-segmentation.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb15-7"><a href="chinese-word-segmentation.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jiebaR)</span>
<span id="cb15-8"><a href="chinese-word-segmentation.html#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud2)</span>
<span id="cb15-9"><a href="chinese-word-segmentation.html#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="chinese-word-segmentation.html#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Windows-only</span></span>
<span id="cb15-11"><a href="chinese-word-segmentation.html#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Uncomment to set locale</span></span>
<span id="cb15-12"><a href="chinese-word-segmentation.html#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Sys.setlocale(category = &quot;LC_ALL&quot;, locale = &quot;cht&quot;)</span></span></code></pre></div>
<p>Before we perform any analysis on the Chinese data, we need to fix the issue of word tokenization.</p>
<p>Unlike English, where each word token is delimited by white spaces, Chinese word tokens are much less straightforward. A word, however, is an important semantic unit in many linguistic analysis.</p>
<p>In this workshop, I will introduce a frequently used library, <code>jiebaR</code>, for Chinese word segmentation.</p>
<div id="chinese-word-segmenter-jiebar" class="section level2">
<h2>Chinese Word Segmenter <code>jiebaR</code></h2>
<div id="a-quick-example" class="section level3">
<h3>A Quick Example</h3>
<p>Now let’s take a look at a quick example. Let’s assume that in our corpus, we have collected only two documents, each consisting of only one short paragraph.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb16-1"><a href="chinese-word-segmentation.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple corpus data</span></span>
<span id="cb16-2"><a href="chinese-word-segmentation.html#cb16-2" aria-hidden="true" tabindex="-1"></a>sents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;綠黨桃園市議員王浩宇爆料，指民眾黨不分區被提名人蔡壁如、黃瀞瑩，在昨（6）日才請辭是為領年終獎金。台灣民眾黨主席、台北市長柯文哲7日受訪時則說，都是按流程走，不要把人家想得這麼壞。&quot;</span>,</span>
<span id="cb16-3"><a href="chinese-word-segmentation.html#cb16-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;新北消防救護人員說，119在疫情的期間，除肩負協助確診患者送醫的任務，仍需負擔每天超過500件以上的緊急救護案件，疫情期間稍一不慎，極可能造成到院前，緊急救護能量和醫療體系的崩壞；目前確診案件不斷的增加，國家面臨疫情是在清零與共存政策間的戰略上，指引的調整勢必勢在必行。&quot;</span>)</span></code></pre></div>
<p>To use <code>jiebaR</code>, there are two important steps:</p>
<ul>
<li><strong>Initialize</strong> a <code>jiebar</code> object using <code>worker()</code></li>
<li><strong>Tokenize</strong> the texts into words using the function <code>segment()</code> with the initialized <code>jiebaR</code> object created earlier</li>
</ul>
<p>For example, in the following code chunk, we first initialize a <code>jiebaR</code> object, i.e., <code>seg1</code>, using <code>worker()</code> and use this as our segmentation model to tokenize our texts into words with <code>segment(sents, jiebar = seg1)</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb17-1"><a href="chinese-word-segmentation.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## quicl example of word-seg</span></span>
<span id="cb17-2"><a href="chinese-word-segmentation.html#cb17-2" aria-hidden="true" tabindex="-1"></a>seg1 <span class="ot">&lt;-</span> <span class="fu">worker</span>()</span>
<span id="cb17-3"><a href="chinese-word-segmentation.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">segment</span>(sents, <span class="at">jiebar =</span> seg1)</span></code></pre></div>
<pre class="Rout"><code>  [1] &quot;綠黨&quot;     &quot;桃園市&quot;   &quot;議員&quot;     &quot;王浩宇&quot;   &quot;爆料&quot;     &quot;指民眾&quot;  
  [7] &quot;黨&quot;       &quot;不&quot;       &quot;分區&quot;     &quot;被&quot;       &quot;提名&quot;     &quot;人&quot;      
 [13] &quot;蔡壁如&quot;   &quot;黃&quot;       &quot;瀞&quot;       &quot;瑩&quot;       &quot;在昨&quot;     &quot;6&quot;       
 [19] &quot;日&quot;       &quot;才&quot;       &quot;請辭&quot;     &quot;是&quot;       &quot;為領&quot;     &quot;年終獎金&quot;
 [25] &quot;台灣民眾&quot; &quot;黨&quot;       &quot;主席&quot;     &quot;台北&quot;     &quot;市長&quot;     &quot;柯文&quot;    
 [31] &quot;哲&quot;       &quot;7&quot;        &quot;日&quot;       &quot;受訪&quot;     &quot;時則&quot;     &quot;說&quot;      
 [37] &quot;都&quot;       &quot;是&quot;       &quot;按&quot;       &quot;流程&quot;     &quot;走&quot;       &quot;不要&quot;    
 [43] &quot;把&quot;       &quot;人家&quot;     &quot;想得&quot;     &quot;這麼&quot;     &quot;壞&quot;       &quot;新北&quot;    
 [49] &quot;消防&quot;     &quot;救護&quot;     &quot;人員&quot;     &quot;說&quot;       &quot;119&quot;      &quot;在&quot;      
 [55] &quot;疫情&quot;     &quot;的&quot;       &quot;期間&quot;     &quot;除&quot;       &quot;肩負&quot;     &quot;協助&quot;    
 [61] &quot;確診&quot;     &quot;患者&quot;     &quot;送醫&quot;     &quot;的&quot;       &quot;任務&quot;     &quot;仍&quot;      
 [67] &quot;需&quot;       &quot;負擔&quot;     &quot;每天&quot;     &quot;超過&quot;     &quot;500&quot;      &quot;件&quot;      
 [73] &quot;以上&quot;     &quot;的&quot;       &quot;緊急&quot;     &quot;救護&quot;     &quot;案件&quot;     &quot;疫情&quot;    
 [79] &quot;期間&quot;     &quot;稍&quot;       &quot;一&quot;       &quot;不慎&quot;     &quot;極&quot;       &quot;可能&quot;    
 [85] &quot;造成&quot;     &quot;到&quot;       &quot;院前&quot;     &quot;緊急&quot;     &quot;救護&quot;     &quot;能量&quot;    
 [91] &quot;和&quot;       &quot;醫療&quot;     &quot;體系&quot;     &quot;的&quot;       &quot;崩壞&quot;     &quot;目前&quot;    
 [97] &quot;確診&quot;     &quot;案件&quot;     &quot;不斷&quot;     &quot;的&quot;       &quot;增加&quot;     &quot;國家&quot;    
[103] &quot;面臨&quot;     &quot;疫情&quot;     &quot;是&quot;       &quot;在&quot;       &quot;清零&quot;     &quot;與&quot;      
[109] &quot;共存&quot;     &quot;政策&quot;     &quot;間&quot;       &quot;的&quot;       &quot;戰略&quot;     &quot;上&quot;      
[115] &quot;指引&quot;     &quot;的&quot;       &quot;調整&quot;     &quot;勢必&quot;     &quot;勢在必行&quot;</code></pre>
</div>
<div id="parameters-setting-of-jiebar" class="section level3">
<h3>Parameters Setting of <code>jiebaR</code></h3>
<p>There are many different parameters we can specify when we initialize the <code>jiebar</code> object (See the documentation in <code>?work()</code>).</p>
<p>Important parameters include:</p>
<ul>
<li><code>type = ...</code>: The type of the segmenter’s model</li>
<li><code>user = ...</code>: A path to the user-defined dictionary</li>
<li><code>stop_word = ...</code>: A path to the stopword list</li>
<li><code>symbol = FALSE</code>: Whether to return symbols (the default is <code>FALSE</code>, i.e., <code>jiebaR</code> removes tokens symbols by default)</li>
<li><code>bylines = FALSE</code>: Whether to return a list or not (crucial if you are using <code>tidytext::unnest_tokens()</code>)</li>
</ul>
</div>
<div id="user-defined-dictionary" class="section level3">
<h3>User-defined dictionary</h3>
<p>From the above example, it is clear to see that some of the words have not been correctly identified by <code>jiebaR</code>: for example, <code>民眾黨</code>, <code>不分區</code>, <code>黃瀞瑩</code>, <code>柯文哲</code>.</p>
<p>It is always recommended to include a user-defined dictionary when tokenizing your texts because different corpora may have their own <strong>unique</strong> vocabulary (i.e., <strong>domain-specific</strong> lexicon).</p>
<p>So, we can pack all new words in one text file:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb19-1"><a href="chinese-word-segmentation.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## check user-dictionary file</span></span>
<span id="cb19-2"><a href="chinese-word-segmentation.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">&quot;demo_data/dict-ch-user-demo.txt&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;民眾黨&quot; &quot;不分區&quot; &quot;黃瀞瑩&quot; &quot;柯文哲&quot;</code></pre>
<p>And include this user-defined dictionary path when initializing the <code>jiebaR</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb21-1"><a href="chinese-word-segmentation.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">## User-defined dictionary</span></span>
<span id="cb21-2"><a href="chinese-word-segmentation.html#cb21-2" aria-hidden="true" tabindex="-1"></a>seg2 <span class="ot">&lt;-</span> <span class="fu">worker</span>(<span class="at">user =</span> <span class="st">&quot;demo_data/dict-ch-user-demo.txt&quot;</span>)</span>
<span id="cb21-3"><a href="chinese-word-segmentation.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">segment</span>(sents, seg2)</span></code></pre></div>
<pre class="Rout"><code>  [1] &quot;綠黨&quot;     &quot;桃園市&quot;   &quot;議員&quot;     &quot;王浩宇&quot;   &quot;爆料&quot;     &quot;指&quot;      
  [7] &quot;民眾黨&quot;   &quot;不分區&quot;   &quot;被&quot;       &quot;提名&quot;     &quot;人&quot;       &quot;蔡壁如&quot;  
 [13] &quot;黃瀞瑩&quot;   &quot;在昨&quot;     &quot;6&quot;        &quot;日&quot;       &quot;才&quot;       &quot;請辭&quot;    
 [19] &quot;是&quot;       &quot;為領&quot;     &quot;年終獎金&quot; &quot;台灣&quot;     &quot;民眾黨&quot;   &quot;主席&quot;    
 [25] &quot;台北&quot;     &quot;市長&quot;     &quot;柯文哲&quot;   &quot;7&quot;        &quot;日&quot;       &quot;受訪&quot;    
 [31] &quot;時則&quot;     &quot;說&quot;       &quot;都&quot;       &quot;是&quot;       &quot;按&quot;       &quot;流程&quot;    
 [37] &quot;走&quot;       &quot;不要&quot;     &quot;把&quot;       &quot;人家&quot;     &quot;想得&quot;     &quot;這麼&quot;    
 [43] &quot;壞&quot;       &quot;新北&quot;     &quot;消防&quot;     &quot;救護&quot;     &quot;人員&quot;     &quot;說&quot;      
 [49] &quot;119&quot;      &quot;在&quot;       &quot;疫情&quot;     &quot;的&quot;       &quot;期間&quot;     &quot;除&quot;      
 [55] &quot;肩負&quot;     &quot;協助&quot;     &quot;確診&quot;     &quot;患者&quot;     &quot;送醫&quot;     &quot;的&quot;      
 [61] &quot;任務&quot;     &quot;仍&quot;       &quot;需&quot;       &quot;負擔&quot;     &quot;每天&quot;     &quot;超過&quot;    
 [67] &quot;500&quot;      &quot;件&quot;       &quot;以上&quot;     &quot;的&quot;       &quot;緊急&quot;     &quot;救護&quot;    
 [73] &quot;案件&quot;     &quot;疫情&quot;     &quot;期間&quot;     &quot;稍&quot;       &quot;一&quot;       &quot;不慎&quot;    
 [79] &quot;極&quot;       &quot;可能&quot;     &quot;造成&quot;     &quot;到&quot;       &quot;院前&quot;     &quot;緊急&quot;    
 [85] &quot;救護&quot;     &quot;能量&quot;     &quot;和&quot;       &quot;醫療&quot;     &quot;體系&quot;     &quot;的&quot;      
 [91] &quot;崩壞&quot;     &quot;目前&quot;     &quot;確診&quot;     &quot;案件&quot;     &quot;不斷&quot;     &quot;的&quot;      
 [97] &quot;增加&quot;     &quot;國家&quot;     &quot;面臨&quot;     &quot;疫情&quot;     &quot;是&quot;       &quot;在&quot;      
[103] &quot;清零&quot;     &quot;與&quot;       &quot;共存&quot;     &quot;政策&quot;     &quot;間&quot;       &quot;的&quot;      
[109] &quot;戰略&quot;     &quot;上&quot;       &quot;指引&quot;     &quot;的&quot;       &quot;調整&quot;     &quot;勢必&quot;    
[115] &quot;勢在必行&quot;</code></pre>
<div class="try">
<p>The format of the user-defined dictionary is a text file, with one word per line. Also, the default encoding of the dictionary is <strong>UTF-8</strong>.</p>
<p>Please note that in Windows, the default encoding of a Chinese <code>txt</code> file created by Notepad may not be UTF-8. (Usually, it is encoded in <strong>big-5</strong>).</p>
<p>Also, files created by MS Office applications tend to be less transparent in terms of their encoding.</p>
</div>
</div>
<div id="stopwords" class="section level3">
<h3>Stopwords</h3>
<p>When we initialize the <code>worker()</code>, we can also specify a <strong>stopword</strong> list, i.e., words that we do not need to include in the later analyses.</p>
<p>For example, in text mining, functional words are usually less informative, thus often excluded in data processing.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb23-1"><a href="chinese-word-segmentation.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## check stopword demo file</span></span>
<span id="cb23-2"><a href="chinese-word-segmentation.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">&quot;demo_data/stopwords-ch-demo.txt&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;日&quot; &quot;都&quot; &quot;是&quot; &quot;的&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb25-1"><a href="chinese-word-segmentation.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Stopwords</span></span>
<span id="cb25-2"><a href="chinese-word-segmentation.html#cb25-2" aria-hidden="true" tabindex="-1"></a>seg3 <span class="ot">&lt;-</span> <span class="fu">worker</span>(<span class="at">user =</span> <span class="st">&quot;demo_data/dict-ch-user-demo.txt&quot;</span>,</span>
<span id="cb25-3"><a href="chinese-word-segmentation.html#cb25-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">stop_word =</span> <span class="st">&quot;demo_data/stopwords-ch-demo.txt&quot;</span>)</span>
<span id="cb25-4"><a href="chinese-word-segmentation.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">segment</span>(sents, seg3)</span></code></pre></div>
<pre class="Rout"><code>  [1] &quot;綠黨&quot;     &quot;桃園市&quot;   &quot;議員&quot;     &quot;王浩宇&quot;   &quot;爆料&quot;     &quot;指&quot;      
  [7] &quot;民眾黨&quot;   &quot;不分區&quot;   &quot;被&quot;       &quot;提名&quot;     &quot;人&quot;       &quot;蔡壁如&quot;  
 [13] &quot;黃瀞瑩&quot;   &quot;在昨&quot;     &quot;6&quot;        &quot;才&quot;       &quot;請辭&quot;     &quot;為領&quot;    
 [19] &quot;年終獎金&quot; &quot;台灣&quot;     &quot;民眾黨&quot;   &quot;主席&quot;     &quot;台北&quot;     &quot;市長&quot;    
 [25] &quot;柯文哲&quot;   &quot;7&quot;        &quot;受訪&quot;     &quot;時則&quot;     &quot;說&quot;       &quot;按&quot;      
 [31] &quot;流程&quot;     &quot;走&quot;       &quot;不要&quot;     &quot;把&quot;       &quot;人家&quot;     &quot;想得&quot;    
 [37] &quot;這麼&quot;     &quot;壞&quot;       &quot;新北&quot;     &quot;消防&quot;     &quot;救護&quot;     &quot;人員&quot;    
 [43] &quot;說&quot;       &quot;119&quot;      &quot;在&quot;       &quot;疫情&quot;     &quot;期間&quot;     &quot;除&quot;      
 [49] &quot;肩負&quot;     &quot;協助&quot;     &quot;確診&quot;     &quot;患者&quot;     &quot;送醫&quot;     &quot;任務&quot;    
 [55] &quot;仍&quot;       &quot;需&quot;       &quot;負擔&quot;     &quot;每天&quot;     &quot;超過&quot;     &quot;500&quot;     
 [61] &quot;件&quot;       &quot;以上&quot;     &quot;緊急&quot;     &quot;救護&quot;     &quot;案件&quot;     &quot;疫情&quot;    
 [67] &quot;期間&quot;     &quot;稍&quot;       &quot;一&quot;       &quot;不慎&quot;     &quot;極&quot;       &quot;可能&quot;    
 [73] &quot;造成&quot;     &quot;到&quot;       &quot;院前&quot;     &quot;緊急&quot;     &quot;救護&quot;     &quot;能量&quot;    
 [79] &quot;和&quot;       &quot;醫療&quot;     &quot;體系&quot;     &quot;崩壞&quot;     &quot;目前&quot;     &quot;確診&quot;    
 [85] &quot;案件&quot;     &quot;不斷&quot;     &quot;增加&quot;     &quot;國家&quot;     &quot;面臨&quot;     &quot;疫情&quot;    
 [91] &quot;在&quot;       &quot;清零&quot;     &quot;與&quot;       &quot;共存&quot;     &quot;政策&quot;     &quot;間&quot;      
 [97] &quot;戰略&quot;     &quot;上&quot;       &quot;指引&quot;     &quot;調整&quot;     &quot;勢必&quot;     &quot;勢在必行&quot;</code></pre>
</div>
<div id="pos-tagging" class="section level3">
<h3>POS Tagging</h3>
<p>In addition to word tokenization, <code>jiebaR</code> also supports parts-of-speech (POS) tagging. That is, for each word, <code>jiebaR</code> can also provide its part-of-speech tag.</p>
<p>We can get the POS annotations by specifying <code>type = "tag"</code> when we initialize the <code>worker()</code>.</p>
<p>The returned object is a <strong>named character vector</strong>, i.e., the POS tags of the words are included in the <strong>names</strong> of the vectors.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb27-1"><a href="chinese-word-segmentation.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## POS Tagging </span></span>
<span id="cb27-2"><a href="chinese-word-segmentation.html#cb27-2" aria-hidden="true" tabindex="-1"></a>seg4 <span class="ot">&lt;-</span> <span class="fu">worker</span>(<span class="at">type =</span> <span class="st">&quot;tag&quot;</span>,</span>
<span id="cb27-3"><a href="chinese-word-segmentation.html#cb27-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">user =</span> <span class="st">&quot;demo_data/dict-ch-user-demo.txt&quot;</span>, </span>
<span id="cb27-4"><a href="chinese-word-segmentation.html#cb27-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">stop_word =</span> <span class="st">&quot;demo_data/stopwords-ch-demo.txt&quot;</span>)</span>
<span id="cb27-5"><a href="chinese-word-segmentation.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">segment</span>(sents, seg4)</span></code></pre></div>
<pre class="Rout"><code>         n         ns          n          x          n          n          x 
    &quot;綠黨&quot;   &quot;桃園市&quot;     &quot;議員&quot;   &quot;王浩宇&quot;     &quot;爆料&quot;       &quot;指&quot;   &quot;民眾黨&quot; 
         x          p          v          n          x          x          x 
  &quot;不分區&quot;       &quot;被&quot;     &quot;提名&quot;       &quot;人&quot;   &quot;蔡壁如&quot;   &quot;黃瀞瑩&quot;     &quot;在昨&quot; 
         x          d          v          x          n          x          x 
       &quot;6&quot;       &quot;才&quot;     &quot;請辭&quot;     &quot;為領&quot; &quot;年終獎金&quot;     &quot;台灣&quot;   &quot;民眾黨&quot; 
         n         ns          n          x          x          v          x 
    &quot;主席&quot;     &quot;台北&quot;     &quot;市長&quot;   &quot;柯文哲&quot;        &quot;7&quot;     &quot;受訪&quot;     &quot;時則&quot; 
        zg          p          n          v         df          p          n 
      &quot;說&quot;       &quot;按&quot;     &quot;流程&quot;       &quot;走&quot;     &quot;不要&quot;       &quot;把&quot;     &quot;人家&quot; 
         x          r          a          x          n          v          n 
    &quot;想得&quot;     &quot;這麼&quot;       &quot;壞&quot;     &quot;新北&quot;     &quot;消防&quot;     &quot;救護&quot;     &quot;人員&quot; 
        zg          m          p          n          f          p          n 
      &quot;說&quot;      &quot;119&quot;       &quot;在&quot;     &quot;疫情&quot;     &quot;期間&quot;       &quot;除&quot;     &quot;肩負&quot; 
         v          v          n          v          n         zg          v 
    &quot;協助&quot;     &quot;確診&quot;     &quot;患者&quot;     &quot;送醫&quot;     &quot;任務&quot;       &quot;仍&quot;       &quot;需&quot; 
         v          r          v          m         zg          f          a 
    &quot;負擔&quot;     &quot;每天&quot;     &quot;超過&quot;      &quot;500&quot;       &quot;件&quot;     &quot;以上&quot;     &quot;緊急&quot; 
         v          n          n          f         zg          m          a 
    &quot;救護&quot;     &quot;案件&quot;     &quot;疫情&quot;     &quot;期間&quot;       &quot;稍&quot;       &quot;一&quot;     &quot;不慎&quot; 
         d          v          v          v          s          a          v 
      &quot;極&quot;     &quot;可能&quot;     &quot;造成&quot;       &quot;到&quot;     &quot;院前&quot;     &quot;緊急&quot;     &quot;救護&quot; 
         n          c          n          n          v          t          v 
    &quot;能量&quot;       &quot;和&quot;     &quot;醫療&quot;     &quot;體系&quot;     &quot;崩壞&quot;     &quot;目前&quot;     &quot;確診&quot; 
         n          d          v          n          v          n          p 
    &quot;案件&quot;     &quot;不斷&quot;     &quot;增加&quot;     &quot;國家&quot;     &quot;面臨&quot;     &quot;疫情&quot;       &quot;在&quot; 
         z         zg          v          n          f          n          f 
    &quot;清零&quot;       &quot;與&quot;     &quot;共存&quot;     &quot;政策&quot;       &quot;間&quot;     &quot;戰略&quot;       &quot;上&quot; 
         v         vn          d          i 
    &quot;指引&quot;     &quot;調整&quot;     &quot;勢必&quot; &quot;勢在必行&quot; </code></pre>
<div class="info">
<p>Every POS tagger has its own predefined tag set. The following table lists the annotations of the POS tag set used in <code>jiebaR</code>:</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["詞性代碼"],"name":[1],"type":["chr"],"align":["left"]},{"label":["現代漢語詞性"],"name":[2],"type":["chr"],"align":["left"]},{"label":["詞性名稱"],"name":[3],"type":["chr"],"align":["left"]},{"label":["詞性代碼的命名方式與補充說明"],"name":[4],"type":["chr"],"align":["left"]},{"label":["舉例"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"a","2":"形容詞","3":"形容詞","4":"取英語形容詞adjective的第1個字母。","5":"大, 好, 新"},{"1":"ag","2":"形容詞","3":"形語素","4":"形容詞性語素。形容詞代碼為a，語素代碼g前面置以a。","5":"奇, 私, 秀"},{"1":"ad","2":"形容詞","3":"副形詞","4":"直接作狀語的形容詞。形容詞代碼a和副詞代碼d並在一起。","5":"完全, 突然, 直接"},{"1":"an","2":"形容詞","3":"名形詞","4":"具有名詞功能的形容詞。形容詞代碼a和名詞代碼n並在一起。","5":"安全, 困難, 矛盾"},{"1":"b","2":"形容詞","3":"區別詞","4":"取漢字“別”的聲母。","5":"主要, 副, 總"},{"1":"c","2":"連詞","3":"連接詞","4":"取英語連詞conjunction的第1個字母。","5":"和, 而, 但"},{"1":"d","2":"副詞","3":"副詞","4":"取adverb的第2個字母，因其第1個字母已用於形容詞。","5":"不, 也, 就"},{"1":"dg","2":"副詞","3":"副語素","4":"副詞性語素。副詞代碼為d，語素代碼ｇ前面置以d。只有兩個。","5":"俱, 輒"},{"1":"df *","2":"動詞","3":"能願動詞: 不要","4":"專指不要","5":"不要"},{"1":"e","2":"嘆詞","3":"嘆詞","4":"取英語嘆詞exclamation的第1個字母。","5":"嗯, 哎, 咦"},{"1":"eng *","2":"外語","3":"外語","4":"NA","5":"NA"},{"1":"f","2":"動詞","3":"方位詞(趨向動詞)","4":"取漢字“方”的聲母。","5":"上, 中, 後"},{"1":"g","2":"(難以判斷)","3":"語素","4":"絕大多數語素都能作為合成詞的“詞根”，取漢字“根”的聲母。","5":"浠, 僭, 涔"},{"1":"h","2":"副詞","3":"前接成分","4":"取英語head的第1個字母。只有兩個。","5":"非, 超低"},{"1":"i","2":"形容詞","3":"成語","4":"取英語成語idiom的第1個字母。","5":"一口氣, 大吃一驚, 九曲迴腸"},{"1":"j","2":"名詞","3":"簡稱略語","4":"取漢字“簡”的聲母。","5":"法, 人大, 漢"},{"1":"k","2":"代詞","3":"後接成分","4":"只有四個。","5":"們, 者, 型, 式"},{"1":"l","2":"(難以判斷)","3":"慣用語","4":"慣用語尚未成為成語，有點“臨時性”，取“臨”的聲母。","5":"發言人, 是不是, 沒想到"},{"1":"m","2":"數詞","3":"數詞","4":"取英語numeral的第3個字母，n，u已有他用。","5":"年, 一, 月, 多"},{"1":"mg *","2":"名詞","3":"干支","4":"只有兩個。","5":"巳, 寅"},{"1":"mq *","2":"代詞","3":"指示代詞","4":"布丁註：不太確定。","5":"這件, 這場, 一方面"},{"1":"n","2":"名詞","3":"名詞","4":"取英語名詞noun的第1個字母。","5":"人, 時, 國家"},{"1":"ng","2":"名詞","3":"名語素","4":"名詞性語素。名詞代碼為n，語素代碼ｇ前面置以n。","5":"子, 身, 師, 眾"},{"1":"nr","2":"名詞","3":"人名","4":"名詞代碼n和“人(ren)”的聲母並在一起。","5":"連, 王, 楊"},{"1":"nrfg *","2":"名詞","3":"完整人名","4":"明確可以辨別為人名的詞。","5":"李自成, 張居正, 康熙"},{"1":"nrt *","2":"名詞","3":"外國名詞","4":"布丁註：不太確定。","5":"二人, 闖王, 崇禎"},{"1":"ns","2":"名詞","3":"地名","4":"名詞代碼n和處所詞代碼s並在一起。","5":"臺灣, 美國, 日本"},{"1":"nt","2":"名詞","3":"機構團體","4":"“團”的聲母為t，名詞代碼n和t並在一起。","5":"國務院, 外交部"},{"1":"nz","2":"名詞","3":"其他專名","4":"“專”的聲母的第1個字母為z，名詞代碼n和z並在一起。","5":"百科, 和平, 英語"},{"1":"o","2":"擬聲詞","3":"擬聲詞","4":"取英語擬聲詞onomatopoeia的第1個字母。","5":"哈哈, 砰, 嗚, 嘿嘿"},{"1":"p","2":"介詞","3":"介詞","4":"取英語介詞prepositional的第1個字母。","5":"在, 為, 對"},{"1":"q","2":"量詞","3":"量詞","4":"取英語quantity的第1個字母。","5":"道, 個, 家"},{"1":"r","2":"代詞","3":"代詞","4":"取英語代詞pronoun的第2個字母,因p已用於介詞。","5":"他, 我, 這"},{"1":"rg *","2":"代詞","3":"茲","4":"只有一個。","5":"茲"},{"1":"rr *","2":"代詞","3":"多數代詞","4":"只有三個。","5":"其他人, 妳們, 偺們"},{"1":"rz *","2":"代詞","3":"這位","4":"只有一個。","5":"這位"},{"1":"s","2":"名詞","3":"處所詞 (方位名詞)","4":"取英語space的第1個字母。","5":"心中, 國內, 身上"},{"1":"t","2":"副詞","3":"時間詞","4":"取英語time的第1個字母。","5":"當, 現在, 當時"},{"1":"tg","2":"名詞","3":"時語素","4":"時間詞性語素。時間詞代碼為t,在語素的代碼g前面置以t。","5":"現, 晚, 春"},{"1":"u","2":"助詞","3":"助詞","4":"取英語助詞auxiliary的第2個字母,因a已用於形容詞。","5":"等, 之, 來說"},{"1":"ud *","2":"助詞","3":"結構助詞: 得","4":"只有一個。","5":"得"},{"1":"uj *","2":"助詞","3":"結構助詞: 的","4":"只有一個。","5":"的"},{"1":"uv *","2":"助詞","3":"結構助詞: 地","4":"只有一個。","5":"地"},{"1":"ug *","2":"助詞","3":"動態助詞: 過","4":"只有一個。","5":"過"},{"1":"ul *","2":"助詞","3":"動態助詞: 了","4":"只有一個。","5":"了"},{"1":"uz *","2":"助詞","3":"動態助詞: 著","4":"只有一個。","5":"著"},{"1":"v","2":"動詞","3":"動詞","4":"取英語動詞verb的第一個字母。","5":"是, 有, 說"},{"1":"vg","2":"動詞","3":"動語素","4":"動詞性語素。動詞代碼為v。在語素的代碼g前面置以V。","5":"喝, 言, 怒"},{"1":"vd","2":"動詞","3":"副動詞","4":"直接作狀語的動詞。動詞和副詞的代碼並在一起。只有三個。","5":"持續, 狡辯, 逆勢"},{"1":"vi *","2":"動詞","3":"不及物動詞(內動詞)","4":"只有四個。","5":"等同於, 徜徉於, 沉溺於, 沉緬於"},{"1":"vn","2":"動詞","3":"名動詞","4":"指具有名詞功能的動詞。動詞和名詞的代碼並在一起。","5":"發展, 工作, 研究"},{"1":"vq *","2":"動詞","3":"完成動詞","4":"只有四個。","5":"去過, 去淨, 唸過, 捱過"},{"1":"w","2":"(標點符號)","3":"標點符號","4":"布丁註：結巴並沒有內建標點符號詞性。","5":"NA"},{"1":"x","2":"(未知詞)","3":"非語素字","4":"非語素字只是一個符號，字母x通常用於代表未知數、符號。","5":"榪, 姆, 灞"},{"1":"y","2":"助詞","3":"語氣詞(語氣助詞)","4":"取漢字“語”的聲母。","5":"呢, 吧, 嗎"},{"1":"z","2":"形容詞","3":"狀態詞","4":"取漢字“狀”的聲母的前一個字母。","5":"涓, 優良, 最佳"},{"1":"zg *","2":"副詞","3":"副狀態詞","4":"布丁註：不太確定。","5":"很, 此, 較"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
<div id="chinese-text-analytics-pipeline" class="section level2">
<h2>Chinese Text Analytics Pipeline</h2>
<p>Below is a quick overview of the Chinese Text Analytics Flowchart (Figure <a href="chinese-word-segmentation.html#fig:cpflowchart">1</a>).</p>
<p>In this workshop, I will introduce two methodological frameworks to process Chinese corpus data:</p>
<ul>
<li><code>Tidytext</code> Framework</li>
<li><code>Quanteda</code> Framework</li>
</ul>
<p>As these two packages are more optimized for the English language, I will highlight a few important steps that require more attention with respect to Chinese word segmentation.</p>
<div class="figure"><span style="display:block;" id="fig:cpflowchart"></span>
<div id="htmlwidget-92ad58657693ec223459" style="width:672px;height:576px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-92ad58657693ec223459">{"x":{"diagram":"digraph {\n  \ngraph[layout = dot]\n\nnode[style=filled, color = grey90, penwidth = 0.3, fontcolor = grey30]\nedge[color= grey40, alpha = 0.8, penwidth= 0.4, arrowsize=0.8, arrowhead = normal]\n\n\n## objects\nraw_texts [label = \"Raw Texts\", shape = folder, fillcolor= \"#cccccc\"]\nquanteda [label = \"Quanteda\", shape = folder, fillcolor= \"#f981bb\"]\ntidytext [label = \"Tidytext\", shape = folder, fillcolor= \"#B0E2FC\"]\ntextdf [label = \"Text-based DF\", shape = folder, fillcolor= \"#B0E2FC\"]\nworddf [label = \"Word-based DF\", shape = folder, fillcolor= \"#B0E2FC\"]\ncorpus [label = \"Corpus Object\", shape = folder, fillcolor= \"#f981bb\"]\ntokens [label = \"Tokens Object\", shape = folder, fillcolor= \"#f981bb\"]\n\n## functions\nf_readtext [label = \"readtext()\", shape=document, fillcolor= \"#96F597\"]\nf_dataframe [label = \"data.frame()\", shape=document, fillcolor= \"#96F597\"]\nf_corpus [label = \"corpus()\", shape=document, fillcolor= \"#96F597\"]\nf_segment [label = \"segment()\", shape=document, fillcolor= \"#96F597\"]\nf_astokens [label = \"as.tokens()\", shape=document, fillcolor= \"#96F597\"]\nf_tokens [label = \"tokens()\", shape=document, fillcolor= \"#96F597\"]\nf_unnest [label = \"unnest_tokens()\", shape=document, fillcolor= \"#96F597\"]\n\n## links\nraw_texts -> tidytext -> f_readtext -> textdf\ntidytext -> f_dataframe -> textdf\n\ntextdf -> f_unnest -> worddf\nraw_texts -> quanteda -> f_segment -> f_astokens -> tokens #[color=orangered, penwidth=5]\n\nquanteda -> f_corpus -> corpus -> f_tokens -> tokens[color=grey80, penwidth = 0.4, style=\"dashed\"]\n\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 1: Chinese Text Analytics Flowchart
</p>
</div>
<div id="quanteda-framework" class="section level3">
<h3><code>Quanteda</code> Framework</h3>
<p>To perform word tokenization using <code>jiebaR</code> under the Quanteda framework, we need to create the <code>tokens</code> object using the <code>segment()</code> from <code>jiebaR</code>.</p>
<p>The steps are very straightforward. We utilize <code>jiebaR</code> for word tokenization like before:</p>
<ol style="list-style-type: decimal">
<li>Initialize a <code>jiebar</code> model;</li>
<li>Use it to tokenize the corpus text with <code>segment()</code>;</li>
<li>Convert the object into a <code>tokens</code> with <code>as.tokens()</code>.</li>
</ol>
<p>The key is that we need to convert the output of <code>segment()</code> from a <code>list</code> to a <code>tokens</code> using <code>as.tokens()</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb29-1"><a href="chinese-word-segmentation.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize segmenter</span></span>
<span id="cb29-2"><a href="chinese-word-segmentation.html#cb29-2" aria-hidden="true" tabindex="-1"></a>my_seg <span class="ot">&lt;-</span> <span class="fu">worker</span>(<span class="at">user =</span> <span class="st">&quot;demo_data/dict-ch-user-demo.txt&quot;</span>, </span>
<span id="cb29-3"><a href="chinese-word-segmentation.html#cb29-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">symbol=</span> <span class="cn">TRUE</span>,</span>
<span id="cb29-4"><a href="chinese-word-segmentation.html#cb29-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bylines =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-5"><a href="chinese-word-segmentation.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="chinese-word-segmentation.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="do">## create tokens based on self-defined segmentation</span></span>
<span id="cb29-7"><a href="chinese-word-segmentation.html#cb29-7" aria-hidden="true" tabindex="-1"></a>text_tokens <span class="ot">&lt;-</span> <span class="fu">as.tokens</span>(<span class="fu">segment</span>(sents, my_seg))</span></code></pre></div>
<p>With this <code>tokens</code> object, we can apply <code>kiwc()</code> or other Quanteda-supported processing to the corpus data.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb30-1"><a href="chinese-word-segmentation.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">## keyword-in-context</span></span>
<span id="cb30-2"><a href="chinese-word-segmentation.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kwic</span>(text_tokens,</span>
<span id="cb30-3"><a href="chinese-word-segmentation.html#cb30-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">pattern =</span> <span class="st">&quot;柯文哲&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["docname"],"name":[1],"type":["chr"],"align":["left"]},{"label":["from"],"name":[2],"type":["int"],"align":["right"]},{"label":["to"],"name":[3],"type":["int"],"align":["right"]},{"label":["pre"],"name":[4],"type":["chr"],"align":["left"]},{"label":["keyword"],"name":[5],"type":["chr"],"align":["left"]},{"label":["post"],"name":[6],"type":["chr"],"align":["left"]},{"label":["pattern"],"name":[7],"type":["fct"],"align":["left"]}],"data":[{"1":"text1","2":"34","3":"34","4":"民眾黨 主席 、 台北 市長","5":"柯文哲","6":"7 日 受訪 時則 說","7":"柯文哲"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb31-1"><a href="chinese-word-segmentation.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kwic</span>(text_tokens,</span>
<span id="cb31-2"><a href="chinese-word-segmentation.html#cb31-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">pattern =</span> <span class="st">&quot;.*?[台市].*?&quot;</span>, <span class="at">valuetype =</span> <span class="st">&quot;regex&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["docname"],"name":[1],"type":["chr"],"align":["left"]},{"label":["from"],"name":[2],"type":["int"],"align":["right"]},{"label":["to"],"name":[3],"type":["int"],"align":["right"]},{"label":["pre"],"name":[4],"type":["chr"],"align":["left"]},{"label":["keyword"],"name":[5],"type":["chr"],"align":["left"]},{"label":["post"],"name":[6],"type":["chr"],"align":["left"]},{"label":["pattern"],"name":[7],"type":["fct"],"align":["left"]}],"data":[{"1":"text1","2":"2","3":"2","4":"綠黨","5":"桃園市","6":"議員 王浩宇 爆料 ， 指","7":".*?[台市].*?"},{"1":"text1","2":"28","3":"28","4":"請辭 是 為領 年終獎金 。","5":"台灣","6":"民眾黨 主席 、 台北 市長","7":".*?[台市].*?"},{"1":"text1","2":"32","3":"32","4":"。 台灣 民眾黨 主席 、","5":"台北","6":"市長 柯文哲 7 日 受訪","7":".*?[台市].*?"},{"1":"text1","2":"33","3":"33","4":"台灣 民眾黨 主席 、 台北","5":"市長","6":"柯文哲 7 日 受訪 時則","7":".*?[台市].*?"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="try">
<p>In Quanteda, there is a quanteda-native Chinese tokenizer, <code>tokens()</code>. However, its performance is very limited and it does not support user-defined dictionary. Therefore, I would suggest using one’s own self-defined tokenizer for Chinese word segmentation.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb32-1"><a href="chinese-word-segmentation.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Examples of using quanteda-native </span></span>
<span id="cb32-2"><a href="chinese-word-segmentation.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Word segmentation</span></span>
<span id="cb32-3"><a href="chinese-word-segmentation.html#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="chinese-word-segmentation.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="do">## create corpus object</span></span>
<span id="cb32-5"><a href="chinese-word-segmentation.html#cb32-5" aria-hidden="true" tabindex="-1"></a>text_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(sents)</span>
<span id="cb32-6"><a href="chinese-word-segmentation.html#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="chinese-word-segmentation.html#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="do">## summary</span></span>
<span id="cb32-8"><a href="chinese-word-segmentation.html#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(text_corpus)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Types"],"name":[2],"type":["int"],"align":["right"]},{"label":["Tokens"],"name":[3],"type":["int"],"align":["right"]},{"label":["Sentences"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"text1","2":"60","3":"67","4":"2","_rn_":"1"},{"1":"text2","2":"64","3":"88","4":"1","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb33-1"><a href="chinese-word-segmentation.html#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="chinese-word-segmentation.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Create tokens object</span></span>
<span id="cb33-3"><a href="chinese-word-segmentation.html#cb33-3" aria-hidden="true" tabindex="-1"></a>text_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(text_corpus)</span>
<span id="cb33-4"><a href="chinese-word-segmentation.html#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="chinese-word-segmentation.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Check quanteda-native word tokenization result</span></span>
<span id="cb33-6"><a href="chinese-word-segmentation.html#cb33-6" aria-hidden="true" tabindex="-1"></a>text_tokens[[<span class="dv">1</span>]]</span>
<span id="cb33-7"><a href="chinese-word-segmentation.html#cb33-7" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;綠黨&quot;</span>     <span class="st">&quot;桃園市&quot;</span>   <span class="st">&quot;議員&quot;</span>     <span class="st">&quot;王&quot;</span>       <span class="st">&quot;浩&quot;</span>       <span class="st">&quot;宇&quot;</span>      </span>
<span id="cb33-8"><a href="chinese-word-segmentation.html#cb33-8" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;爆&quot;</span>       <span class="st">&quot;料&quot;</span>       <span class="st">&quot;，&quot;</span>       <span class="st">&quot;指&quot;</span>       <span class="st">&quot;民眾&quot;</span>     <span class="st">&quot;黨&quot;</span>      </span>
<span id="cb33-9"><a href="chinese-word-segmentation.html#cb33-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>] <span class="st">&quot;不&quot;</span>       <span class="st">&quot;分區&quot;</span>     <span class="st">&quot;被&quot;</span>       <span class="st">&quot;提名&quot;</span>     <span class="st">&quot;人&quot;</span>       <span class="st">&quot;蔡&quot;</span>      </span>
<span id="cb33-10"><a href="chinese-word-segmentation.html#cb33-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] <span class="st">&quot;壁&quot;</span>       <span class="st">&quot;如&quot;</span>       <span class="st">&quot;、&quot;</span>       <span class="st">&quot;黃&quot;</span>       <span class="st">&quot;瀞&quot;</span>       <span class="st">&quot;瑩&quot;</span>      </span>
<span id="cb33-11"><a href="chinese-word-segmentation.html#cb33-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">25</span>] <span class="st">&quot;，&quot;</span>       <span class="st">&quot;在&quot;</span>       <span class="st">&quot;昨&quot;</span>       <span class="st">&quot;（&quot;</span>       <span class="st">&quot;6&quot;</span>        <span class="st">&quot;）&quot;</span>      </span>
<span id="cb33-12"><a href="chinese-word-segmentation.html#cb33-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">31</span>] <span class="st">&quot;日&quot;</span>       <span class="st">&quot;才&quot;</span>       <span class="st">&quot;請辭&quot;</span>     <span class="st">&quot;是&quot;</span>       <span class="st">&quot;為&quot;</span>       <span class="st">&quot;領&quot;</span>      </span>
<span id="cb33-13"><a href="chinese-word-segmentation.html#cb33-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">37</span>] <span class="st">&quot;年終獎金&quot;</span> <span class="st">&quot;。&quot;</span>       <span class="st">&quot;台灣&quot;</span>     <span class="st">&quot;民眾&quot;</span>     <span class="st">&quot;黨主席&quot;</span>   <span class="st">&quot;、&quot;</span>      </span>
<span id="cb33-14"><a href="chinese-word-segmentation.html#cb33-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">43</span>] <span class="st">&quot;台北市&quot;</span>   <span class="st">&quot;長&quot;</span>       <span class="st">&quot;柯&quot;</span>       <span class="st">&quot;文&quot;</span>       <span class="st">&quot;哲&quot;</span>       <span class="st">&quot;7&quot;</span>       </span>
<span id="cb33-15"><a href="chinese-word-segmentation.html#cb33-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">49</span>] <span class="st">&quot;日&quot;</span>       <span class="st">&quot;受&quot;</span>       <span class="st">&quot;訪&quot;</span>       <span class="st">&quot;時&quot;</span>       <span class="st">&quot;則&quot;</span>       <span class="st">&quot;說&quot;</span>      </span>
<span id="cb33-16"><a href="chinese-word-segmentation.html#cb33-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">55</span>] <span class="st">&quot;，&quot;</span>       <span class="st">&quot;都是&quot;</span>     <span class="st">&quot;按&quot;</span>       <span class="st">&quot;流程&quot;</span>     <span class="st">&quot;走&quot;</span>       <span class="st">&quot;，&quot;</span>      </span>
<span id="cb33-17"><a href="chinese-word-segmentation.html#cb33-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">61</span>] <span class="st">&quot;不要&quot;</span>     <span class="st">&quot;把&quot;</span>       <span class="st">&quot;人家&quot;</span>     <span class="st">&quot;想得&quot;</span>     <span class="st">&quot;這麼&quot;</span>     <span class="st">&quot;壞&quot;</span>      </span>
<span id="cb33-18"><a href="chinese-word-segmentation.html#cb33-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">67</span>] <span class="st">&quot;。&quot;</span>      </span>
<span id="cb33-19"><a href="chinese-word-segmentation.html#cb33-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-20"><a href="chinese-word-segmentation.html#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="do">## KWIC</span></span>
<span id="cb33-21"><a href="chinese-word-segmentation.html#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="fu">kwic</span>(text_tokens, <span class="at">pattern =</span> <span class="st">&quot;柯文哲&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["docname"],"name":[1],"type":["chr"],"align":["left"]},{"label":["from"],"name":[2],"type":["int"],"align":["right"]},{"label":["to"],"name":[3],"type":["int"],"align":["right"]},{"label":["pre"],"name":[4],"type":["chr"],"align":["left"]},{"label":["keyword"],"name":[5],"type":["chr"],"align":["left"]},{"label":["post"],"name":[6],"type":["chr"],"align":["left"]},{"label":["pattern"],"name":[7],"type":["fct"],"align":["left"]}],"data":[],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb34-1"><a href="chinese-word-segmentation.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kwic</span>(text_tokens, <span class="at">pattern =</span> <span class="st">&quot;柯&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["docname"],"name":[1],"type":["chr"],"align":["left"]},{"label":["from"],"name":[2],"type":["int"],"align":["right"]},{"label":["to"],"name":[3],"type":["int"],"align":["right"]},{"label":["pre"],"name":[4],"type":["chr"],"align":["left"]},{"label":["keyword"],"name":[5],"type":["chr"],"align":["left"]},{"label":["post"],"name":[6],"type":["chr"],"align":["left"]},{"label":["pattern"],"name":[7],"type":["fct"],"align":["left"]}],"data":[{"1":"text1","2":"45","3":"45","4":"民眾 黨主席 、 台北市 長","5":"柯","6":"文 哲 7 日 受","7":"柯"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>From the above example, it is clear to see that quite a few word tokens have not been successfully identified by the Quanteda-native word segmentation (e.g., proper names like <code>柯文哲</code>, <code>王浩宇</code>). This would also have great impact on the effectiveness of <code>kwic()</code> as well. Therefore analysis based on the Quanteda-native segmentation can be very limited.</p>
</div>
</div>
<div id="tidytext-framework" class="section level3">
<h3><code>Tidytext</code> Framework</h3>
<p>Now let’s turn to the <code>Titytext</code> framework of text processing.</p>
<p>The <code>tidytext</code> package is made for the handling of the tidy text format of the corpus data, i.e., to process textual data on the basis of <strong>data frames</strong>.</p>
<p>With a data frame format of the text data, we can manipulate the text data with a standard set of tidy tools and packages in R, including <code>dplyr</code>, <code>tidyr</code>, and <code>ggplot2</code>.</p>
<p>In the <code>tidytext</code> format, the tokenization is taken care of by <code>unnest_tokens()</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb35-1"><a href="chinese-word-segmentation.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a text-based data frame</span></span>
<span id="cb35-2"><a href="chinese-word-segmentation.html#cb35-2" aria-hidden="true" tabindex="-1"></a>corp_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">text_id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb35-3"><a href="chinese-word-segmentation.html#cb35-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">text =</span> sents)</span>
<span id="cb35-4"><a href="chinese-word-segmentation.html#cb35-4" aria-hidden="true" tabindex="-1"></a>corp_df</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["text_id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["text"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"綠黨桃園市議員王浩宇爆料，指民眾黨不分區被提名人蔡壁如、黃瀞瑩，在昨（6）日才請辭是為領年終獎金。台灣民眾黨主席、台北市長柯文哲7日受訪時則說，都是按流程走，不要把人家想得這麼壞。"},{"1":"2","2":"新北消防救護人員說，119在疫情的期間，除肩負協助確診患者送醫的任務，仍需負擔每天超過500件以上的緊急救護案件，疫情期間稍一不慎，極可能造成到院前，緊急救護能量和醫療體系的崩壞；目前確診案件不斷的增加，國家面臨疫情是在清零與共存政策間的戰略上，指引的調整勢必勢在必行。"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Then, we use <code>unnest_tokens()</code> to tokenize the <strong>text-based</strong> data frame (<code>corp_df</code>) into a <strong>word-based</strong> data frame (<code>corp_df_word</code>).</p>
<p>Texts included in the <code>text</code> column are tokenized into words, which are unnested into independent rows in the <code>word</code> column of the new data frame.</p>
<hr />
<p><img src="images/unnest-tokens.png" width="80%" /></p>
<hr />
<div class="sourceCode" id="cb36"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb36-1"><a href="chinese-word-segmentation.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenization</span></span>
<span id="cb36-2"><a href="chinese-word-segmentation.html#cb36-2" aria-hidden="true" tabindex="-1"></a>corp_df_word <span class="ot">&lt;-</span> corp_df <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="chinese-word-segmentation.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(</span>
<span id="cb36-4"><a href="chinese-word-segmentation.html#cb36-4" aria-hidden="true" tabindex="-1"></a>    word,                 <span class="do">## name for new tokens to be unnested</span></span>
<span id="cb36-5"><a href="chinese-word-segmentation.html#cb36-5" aria-hidden="true" tabindex="-1"></a>    text,                 <span class="do">## name for original larger units</span></span>
<span id="cb36-6"><a href="chinese-word-segmentation.html#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">token =</span> <span class="cf">function</span>(x)   <span class="do">## self-defined tokenization method</span></span>
<span id="cb36-7"><a href="chinese-word-segmentation.html#cb36-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">segment</span>(x, <span class="at">jiebar =</span> my_seg)</span>
<span id="cb36-8"><a href="chinese-word-segmentation.html#cb36-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-9"><a href="chinese-word-segmentation.html#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="chinese-word-segmentation.html#cb36-10" aria-hidden="true" tabindex="-1"></a>corp_df_word</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["text_id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["word"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"綠黨"},{"1":"1","2":"桃園市"},{"1":"1","2":"議員"},{"1":"1","2":"王浩宇"},{"1":"1","2":"爆料"},{"1":"1","2":"，"},{"1":"1","2":"指"},{"1":"1","2":"民眾黨"},{"1":"1","2":"不分區"},{"1":"1","2":"被"},{"1":"1","2":"提名"},{"1":"1","2":"人"},{"1":"1","2":"蔡壁如"},{"1":"1","2":"、"},{"1":"1","2":"黃瀞瑩"},{"1":"1","2":"，"},{"1":"1","2":"在昨"},{"1":"1","2":"（"},{"1":"1","2":"6"},{"1":"1","2":"）"},{"1":"1","2":"日"},{"1":"1","2":"才"},{"1":"1","2":"請辭"},{"1":"1","2":"是"},{"1":"1","2":"為領"},{"1":"1","2":"年終獎金"},{"1":"1","2":"。"},{"1":"1","2":"台灣"},{"1":"1","2":"民眾黨"},{"1":"1","2":"主席"},{"1":"1","2":"、"},{"1":"1","2":"台北"},{"1":"1","2":"市長"},{"1":"1","2":"柯文哲"},{"1":"1","2":"7"},{"1":"1","2":"日"},{"1":"1","2":"受訪"},{"1":"1","2":"時則"},{"1":"1","2":"說"},{"1":"1","2":"，"},{"1":"1","2":"都"},{"1":"1","2":"是"},{"1":"1","2":"按"},{"1":"1","2":"流程"},{"1":"1","2":"走"},{"1":"1","2":"，"},{"1":"1","2":"不要"},{"1":"1","2":"把"},{"1":"1","2":"人家"},{"1":"1","2":"想得"},{"1":"1","2":"這麼"},{"1":"1","2":"壞"},{"1":"1","2":"。"},{"1":"2","2":"新北"},{"1":"2","2":"消防"},{"1":"2","2":"救護"},{"1":"2","2":"人員"},{"1":"2","2":"說"},{"1":"2","2":"，"},{"1":"2","2":"119"},{"1":"2","2":"在"},{"1":"2","2":"疫情"},{"1":"2","2":"的"},{"1":"2","2":"期間"},{"1":"2","2":"，"},{"1":"2","2":"除"},{"1":"2","2":"肩負"},{"1":"2","2":"協助"},{"1":"2","2":"確診"},{"1":"2","2":"患者"},{"1":"2","2":"送醫"},{"1":"2","2":"的"},{"1":"2","2":"任務"},{"1":"2","2":"，"},{"1":"2","2":"仍"},{"1":"2","2":"需"},{"1":"2","2":"負擔"},{"1":"2","2":"每天"},{"1":"2","2":"超過"},{"1":"2","2":"500"},{"1":"2","2":"件"},{"1":"2","2":"以上"},{"1":"2","2":"的"},{"1":"2","2":"緊急"},{"1":"2","2":"救護"},{"1":"2","2":"案件"},{"1":"2","2":"，"},{"1":"2","2":"疫情"},{"1":"2","2":"期間"},{"1":"2","2":"稍"},{"1":"2","2":"一"},{"1":"2","2":"不慎"},{"1":"2","2":"，"},{"1":"2","2":"極"},{"1":"2","2":"可能"},{"1":"2","2":"造成"},{"1":"2","2":"到"},{"1":"2","2":"院前"},{"1":"2","2":"，"},{"1":"2","2":"緊急"},{"1":"2","2":"救護"},{"1":"2","2":"能量"},{"1":"2","2":"和"},{"1":"2","2":"醫療"},{"1":"2","2":"體系"},{"1":"2","2":"的"},{"1":"2","2":"崩壞"},{"1":"2","2":"；"},{"1":"2","2":"目前"},{"1":"2","2":"確診"},{"1":"2","2":"案件"},{"1":"2","2":"不斷"},{"1":"2","2":"的"},{"1":"2","2":"增加"},{"1":"2","2":"，"},{"1":"2","2":"國家"},{"1":"2","2":"面臨"},{"1":"2","2":"疫情"},{"1":"2","2":"是"},{"1":"2","2":"在"},{"1":"2","2":"清零"},{"1":"2","2":"與"},{"1":"2","2":"共存"},{"1":"2","2":"政策"},{"1":"2","2":"間"},{"1":"2","2":"的"},{"1":"2","2":"戰略"},{"1":"2","2":"上"},{"1":"2","2":"，"},{"1":"2","2":"指引"},{"1":"2","2":"的"},{"1":"2","2":"調整"},{"1":"2","2":"勢必"},{"1":"2","2":"勢在必行"},{"1":"2","2":"。"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="info">
<p>It can be seen that for the <code>token</code> parameter in <code>unnest_tokens()</code>, we use an <strong>anonymous</strong> function based on <code>jiebaR</code> and <code>segment()</code> for self-defined Chinese word segmentation.</p>
<p>This is called <strong>anonymous functions</strong> because it has not been assigned to any object name in the current R session.</p>
<p>You may check <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Writing-functions">R language documentation</a> for more detail on Writing Functions.</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="loading-text-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="applications.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
